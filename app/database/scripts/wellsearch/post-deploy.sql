/* Additional updates to DB stucture, as Python's model.py has limited abilities to do this */
DROP INDEX IF EXISTS well_latlong CASCADE;
CREATE INDEX well_latlong ON well (latitude, longitude);

DROP INDEX IF EXISTS bcgs_number_idx CASCADE;
CREATE INDEX bcgs_number_idx ON bcgs_number (bcgs_number);

COMMENT ON TABLE activity_submission               IS 'Placeholder table comment.';
COMMENT ON TABLE activity_submission_water_quality IS 'Placeholder table comment.';
COMMENT ON TABLE aquifer_well                      IS 'Placeholder table comment.';
COMMENT ON TABLE bcgs_number                       IS 'Placeholder table comment.';
COMMENT ON TABLE bedrock_material_code                  IS 'Placeholder table comment.';
COMMENT ON TABLE bedrock_material_descriptor_code       IS 'Placeholder table comment.';
COMMENT ON TABLE casing                            IS 'Placeholder table comment.';
COMMENT ON TABLE casing_material_code                   IS 'Placeholder table comment.';
COMMENT ON TABLE casing_code                       IS 'Placeholder table comment.';
COMMENT ON TABLE decommission_method_code               IS 'Placeholder table comment.';
COMMENT ON TABLE development_method_code                IS 'Placeholder table comment.';
COMMENT ON TABLE drilling_company                  IS 'Placeholder table comment.';
COMMENT ON TABLE drilling_method_code                   IS 'Placeholder table comment.';
COMMENT ON TABLE filter_pack_material_code              IS 'Placeholder table comment.';
COMMENT ON TABLE filter_pack_material_size_code         IS 'Placeholder table comment.';
COMMENT ON TABLE ground_elevation_method_code           IS 'Placeholder table comment.';
COMMENT ON TABLE intended_water_use_code                IS 'Placeholder table comment.';
COMMENT ON TABLE land_district_code                     IS 'Placeholder table comment.';
COMMENT ON TABLE licenced_status_code                   IS 'Placeholder table comment.';
COMMENT ON TABLE liner_material_code                    IS 'Placeholder table comment.';
COMMENT ON TABLE liner_perforation                 IS 'Placeholder table comment.';
COMMENT ON TABLE lithology_colour_code                  IS 'Placeholder table comment.';
COMMENT ON TABLE lithology_description             IS 'Placeholder table comment.';
COMMENT ON TABLE lithology_description_code        IS 'Placeholder table comment.';
COMMENT ON TABLE lithology_hardness_code                IS 'Placeholder table comment.';
COMMENT ON TABLE lithology_material_code                IS 'Placeholder table comment.';
COMMENT ON TABLE lithology_moisture_code                IS 'Placeholder table comment.';
COMMENT ON TABLE lithology_structure_code               IS 'Placeholder table comment.';
COMMENT ON TABLE ltsa_owner                        IS 'Placeholder table comment.';
COMMENT ON TABLE perforation                       IS 'Placeholder table comment.';
COMMENT ON TABLE production_data                   IS 'Placeholder table comment.';
COMMENT ON TABLE province_state_code                    IS 'Placeholder table comment.';
COMMENT ON TABLE screen                            IS 'Placeholder table comment.';
COMMENT ON TABLE screen_assembly_type_code              IS 'Placeholder table comment.';
COMMENT ON TABLE screen_bottom_code                     IS 'Placeholder table comment.';
COMMENT ON TABLE screen_intake_method_code              IS 'Placeholder table comment.';
COMMENT ON TABLE screen_material_code                   IS 'Placeholder table comment.';
COMMENT ON TABLE screen_opening_code                    IS 'Placeholder table comment.';
COMMENT ON TABLE screen_type_code                       IS 'Placeholder table comment.';
COMMENT ON TABLE surface_seal_material_code             IS 'Placeholder table comment.';
COMMENT ON TABLE surface_seal_method_code               IS 'Placeholder table comment.';
COMMENT ON TABLE surficial_material_code                IS 'Placeholder table comment.';
COMMENT ON TABLE water_quality_characteristic      IS 'Placeholder table comment.';
COMMENT ON TABLE well                              IS 'Placeholder table comment.';
COMMENT ON TABLE well_activity_code                IS 'Placeholder table comment.';
COMMENT ON TABLE well_class_code                        IS 'Placeholder table comment.';
COMMENT ON TABLE well_status_code                       IS 'Placeholder table comment.';
COMMENT ON TABLE well_subclass_code                     IS 'Placeholder table comment.';
COMMENT ON TABLE well_water_quality                IS 'Placeholder table comment.';
COMMENT ON TABLE well_yield_unit_code                   IS 'Placeholder table comment.';
COMMENT ON TABLE yield_estimation_method_code           IS 'Placeholder table comment.';


ALTER TABLE bedrock_material_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE bedrock_material_descriptor_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE casing_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE casing_material_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE decommission_method_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE development_method_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE drilling_method_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE filter_pack_material_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE filter_pack_material_size_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE ground_elevation_method_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE intended_water_use_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE land_district_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE licenced_status_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE liner_material_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE lithology_colour_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE lithology_description_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE lithology_hardness_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE lithology_material_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE lithology_moisture_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE lithology_structure_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE obs_well_status_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;

-- Tue 13 Feb 22:36:42 2018 GW Disabled for now until after CodeWithUs Sprint
-- ALTER TABLE province_state_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;

ALTER TABLE screen_assembly_type_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE screen_bottom_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE screen_intake_method_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE screen_material_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE screen_opening_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE screen_type_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE surface_seal_material_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE surface_seal_method_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE surficial_material_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE well_activity_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE well_class_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE well_status_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE well_subclass_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE well_yield_unit_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;
ALTER TABLE yield_estimation_method_code ALTER COLUMN effective_date SET DEFAULT CURRENT_DATE;

-- Thu  1 Mar 20:00:30 2018 GW Django doesn't support multi-column PK's
ALTER TABLE well_subclass_code DROP CONSTRAINT IF EXISTS well_subclass_code_uk CASCADE;
ALTER TABLE well_subclass_code ADD CONSTRAINT well_subclass_code_uk UNIQUE (well_class_code, well_subclass_code);

-- Fri  29 Jun 10:00:30 2018 GW Disable logging for all tables replicated from GWELLS
--         NOTE: This will be reversed once we cut over from WELLS to GWELLS for data entry and submission
ALTER TABLE activity_submission_water_quality SET UNLOGGED;
ALTER TABLE casing                            SET UNLOGGED;
ALTER TABLE liner_perforation                 SET UNLOGGED;
ALTER TABLE lithology_description             SET UNLOGGED;
ALTER TABLE production_data                   SET UNLOGGED;
ALTER TABLE screen                            SET UNLOGGED;
ALTER TABLE activity_submission               SET UNLOGGED;
ALTER TABLE aquifer_well                      SET UNLOGGED;
ALTER TABLE ltsa_owner                        SET UNLOGGED;
ALTER TABLE perforation                       SET UNLOGGED;
ALTER TABLE well_water_quality                SET UNLOGGED;
ALTER TABLE well                              SET UNLOGGED;
ALTER TABLE lithology_description             SET UNLOGGED;
ALTER TABLE bcgs_number                       SET UNLOGGED;
ALTER TABLE bedrock_material_code             SET UNLOGGED;
ALTER TABLE bedrock_material_descriptor_code  SET UNLOGGED;
ALTER TABLE casing_code                       SET UNLOGGED;
ALTER TABLE casing_material_code              SET UNLOGGED;
ALTER TABLE decommission_method_code          SET UNLOGGED;
ALTER TABLE development_method_code           SET UNLOGGED;
ALTER TABLE drilling_company                  SET UNLOGGED;
ALTER TABLE drilling_method_code              SET UNLOGGED;
ALTER TABLE filter_pack_material_code         SET UNLOGGED;
ALTER TABLE filter_pack_material_size_code    SET UNLOGGED;
ALTER TABLE ground_elevation_method_code      SET UNLOGGED;
ALTER TABLE gwells_survey                     SET UNLOGGED;
ALTER TABLE intended_water_use_code           SET UNLOGGED;
ALTER TABLE land_district_code                SET UNLOGGED;
ALTER TABLE licenced_status_code              SET UNLOGGED;
ALTER TABLE liner_material_code               SET UNLOGGED;
ALTER TABLE lithology_colour_code             SET UNLOGGED;
ALTER TABLE lithology_description_code        SET UNLOGGED;
ALTER TABLE lithology_hardness_code           SET UNLOGGED;
ALTER TABLE lithology_material_code           SET UNLOGGED;
ALTER TABLE lithology_moisture_code           SET UNLOGGED;
ALTER TABLE lithology_structure_code          SET UNLOGGED;
ALTER TABLE obs_well_status_code              SET UNLOGGED;
ALTER TABLE online_survey                     SET UNLOGGED;
ALTER TABLE profile                           SET UNLOGGED;
ALTER TABLE screen_assembly_type_code         SET UNLOGGED;
ALTER TABLE screen_bottom_code                SET UNLOGGED;
ALTER TABLE screen_intake_method_code         SET UNLOGGED;
ALTER TABLE screen_material_code              SET UNLOGGED;
ALTER TABLE screen_opening_code               SET UNLOGGED;
ALTER TABLE screen_type_code                  SET UNLOGGED;
ALTER TABLE surface_seal_material_code        SET UNLOGGED;
ALTER TABLE surface_seal_method_code          SET UNLOGGED;
ALTER TABLE surficial_material_code           SET UNLOGGED;
ALTER TABLE water_quality_characteristic      SET UNLOGGED;
ALTER TABLE well_activity_code                SET UNLOGGED;
ALTER TABLE well_subclass_code                SET UNLOGGED;
ALTER TABLE well_class_code                   SET UNLOGGED;
ALTER TABLE well_status_code                  SET UNLOGGED;
ALTER TABLE well_yield_unit_code              SET UNLOGGED;
ALTER TABLE yield_estimation_method_code      SET UNLOGGED;
