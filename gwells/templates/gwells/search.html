{% extends 'gwells/base.html' %}
{% load crispy_forms_tags %}

{% block title %}Search{% endblock %}

{% block bodyheading_block %}Search{% endblock %}

{% block introduction_block %}
    Enter the Well Identification Plate Number or Well Tag Number if known.  If not, try using a combination of the other search criteria. 
    If you would like to specify different criteria, try the <a href="#">Advanced Search</a>.
    <br /><br />
{% endblock %}

{% block body_block %}

<div class="row">
    <div class="col-sm-4">
        {% crispy form %}         
    </div>
    <div class="col-sm-8">
    </div>
</div>
<br />

{% if well_list %}
        <div class="row">
            <div class="col-sm-12">
                {{ well_list.start_index }}-{{ well_list.end_index }} of {{ well_list.paginator.count }} results
                <br /><br />
            </div>
        </div>

        <div class="row row-header">
            <div class="col-sm-1">
                Well Tag #
            </div>
            <div class="col-sm-1">
                Well ID Plate #
            </div>
            <div class="col-sm-2">
                Owner Name
            </div>
            <div class="col-sm-1">
                Street Address
            </div>
            <div class="col-sm-1">
                Lot
            </div>
            <div class="col-sm-1">
                Plan
            </div>
            <div class="col-sm-1">
                District Lot
            </div>
            <div class="col-sm-1">
                Land District
            </div>
            <div class="col-sm-1">
                PID
            </div>
            <div class="col-sm-1">
                Diameter
            </div>
            <div class="col-sm-1">
                Finished Well Depth
            </div>
        </div>

    {% for well in well_list %}
        <div class="row row-bordered">
            <div class="col-sm-1">
                <a href="{% url 'detail' well.id %}">{{ well.well_tag_number }}</a>
            </div>
            <div class="col-sm-1">
                {{ well.identification_plate_number|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-2">
                {{ well.well_owner.full_name|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.street_address|default_if_none:'' }}
                {{ well.site_area|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.lot_number|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.legal_plan|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.legal_district_lot|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.land_district.name|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.pid|stringformat:"09d"|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.diameter|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.finished_well_depth|default_if_none:'&nbsp;' }}
            </div>
        </div>
    {% endfor %}

    {% if well_list.paginator.num_pages > 1 %}
    <div class="row">
        <ul class="pagination nav navbar-nav">
        {% if well_list.has_previous %}
            <li><a href="?page={{ well_list.previous_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Prev</a></li>
        {% endif %}
        
        {% for page in well_list.paginator.page_range %}
            <li class="{% if well_list.number == page %}active{% endif %}"><a href="?page={{ page }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">{{ page }}</a></li>
        {% endfor %}

        {% if well_list.has_next %}
            <li> <a href="?page={{ well_list.next_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Next</a></li>
        {% endif %}
        </ul>
    </div>
    {% endif %}        
        	
{% elif 'well' in request.GET %}
    <div class="row">
        <div class="col-sm-12">
            <p class="lead">No well records could be found.</p>
        </div>
    </div>

{% endif %}

        <br />
{% if 'well' in request.GET %}
    <p>
        Canâ€™t find your well? Try your search again using a different set of criteria.
    </p>
{% endif %}
        <p>
            Failures in data collection, storage and transmission, whether through human or system failures, are inherent in all systems and may make finding a specific well difficult. The submission of well records to the Province of BC was voluntary until February 29, 2016; as such, the Province does not have a record for every well.
        </p>


{% endblock %}

{% block jqscript_block %}
    <script>
        $(document).ready(function(){
            $('[data-toggle="popover"]').popover(); 
        });
    </script>
{% endblock %}