{% extends 'gwells/base.html' %}
{% load crispy_forms_tags pagination_tags sorting_tags %}

{% block title %}Search{% endblock %}

{% block bodyheading_block %}Search{% endblock %}

{% block introduction_block %}
    Enter the Well Identification Plate Number or Well Tag Number if known.  If not, try using a combination of the other search criteria. 
    If you would like to specify different criteria, try the <a href="#">Advanced Search</a>.
    <br /><br />
{% endblock %}

{% block body_block %}

<div class="row">
    <div class="col-sm-4">
        {% crispy form %}         
    </div>
    <div class="col-sm-8">
    </div>
</div>
<br />

{% if well_list %}
    {% autosort well_list %}
    {% autopaginate well_list 25 %}
        <div class="row">
            <div class="col-sm-12">
                {{ page_obj.start_index }}-{{ page_obj.end_index }} of {{ page_obj.paginator.count }} results
                <br /><br />
            </div>
        </div>

        <div class="row row-header">
            <div class="col-sm-1">
                {% anchor well_tag_number "Well Tag #" %}
            </div>
            <div class="col-sm-1">
                {% anchor identification_plate_number "Well ID Plate #" %}
            </div>
            <div class="col-sm-2">
                {% anchor well_owner__full_name "Owner Name" %}
            </div>
            <div class="col-sm-1">
                {% anchor street_address "Street Address" %}
            </div>
            <div class="col-sm-1">
                {% anchor lot_number "Lot" %}
            </div>
            <div class="col-sm-1">
                {% anchor legal_plan "Plan" %}
            </div>
            <div class="col-sm-1">
                {% anchor legal_district_lot "District Lot" %}
            </div>
            <div class="col-sm-1">
                {% anchor land_district "Land District" %}
            </div>
            <div class="col-sm-1">
                {% anchor pid "PID" %}
            </div>
            <div class="col-sm-1">
                {% anchor diameter "Diameter" %}
            </div>
            <div class="col-sm-1">
                {% anchor finished_well_depth "Finished Well Depth" %}
            </div>
        </div>

    {% for well in well_list %}
        <div class="row row-bordered">
            <div class="col-sm-1">
                <a href="{% url 'detail' well.id %}">{{ well.well_tag_number }}</a>
            </div>
            <div class="col-sm-1">
                {{ well.identification_plate_number|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-2">
                {{ well.well_owner.full_name|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.street_address|default_if_none:'' }}
                {{ well.site_area|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.lot_number|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.legal_plan|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.legal_district_lot|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.land_district.name|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.pid|stringformat:"09d"|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.diameter|default_if_none:'&nbsp;' }}
            </div>
            <div class="col-sm-1">
                {{ well.finished_well_depth|default_if_none:'&nbsp;' }}
            </div>
        </div>
    {% endfor %}


    <div class="row">
        {% paginate using 'gwells/bootstrap_pagination.html' %}
    </div>
     
        	
{% elif 'well' in request.GET %}
    <div class="row">
        <div class="col-sm-12">
            <p class="lead">No well records could be found.</p>
        </div>
    </div>

{% endif %}

        <br />
{% if 'well' in request.GET %}
    <p>
        Canâ€™t find your well? Try your search again using a different set of criteria.
    </p>
{% endif %}
        <p>
            Failures in data collection, storage and transmission, whether through human or system failures, are inherent in all systems and may make finding a specific well difficult. The submission of well records to the Province of BC was voluntary until February 29, 2016; as such, the Province does not have a record for every well.
        </p>


{% endblock %}

{% block jqscript_block %}
    <script>
        $(document).ready(function(){
            $('[data-toggle="popover"]').popover(); 
        });
    </script>
{% endblock %}